<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>BhenzFlix Music</title>

<style>
body{
margin:0;
font-family:Arial;
background:radial-gradient(circle,#300000,black);
color:white;
text-align:center;
overflow-x:hidden;
}

.topbar{
padding:15px;
font-size:22px;
letter-spacing:4px;
color:red;
text-shadow:0 0 20px red;
}

/* ALBUM + RING */

.album-wrapper{
position:relative;
width:260px;
height:260px;
margin:20px auto;
}

.rotating-ring{
position:absolute;
width:260px;
height:260px;
animation:spin 12s linear infinite;
}

.rotating-ring svg{
width:100%;
height:100%;
}

.album{
position:absolute;
top:30px;
left:30px;
width:200px;
height:200px;
border-radius:50%;
overflow:hidden;
box-shadow:0 0 40px red;
}

#cover{
width:100%;
height:100%;
object-fit:cover;
}

@keyframes spin{
from{transform:rotate(0deg);}
to{transform:rotate(360deg);}
}

/* CONTROLS */

.controls button{
background:rgba(255,0,0,0.2);
border:none;
color:white;
font-size:20px;
margin:8px;
padding:12px 16px;
border-radius:15px;
box-shadow:0 0 15px red;
cursor:pointer;
}

.controls button:hover{
background:red;
}

#progress{
width:85%;
margin:10px auto;
display:block;
}

.time{
font-size:12px;
opacity:0.8;
}

canvas{
width:100%;
height:140px;
margin-top:15px;
}

/* SEARCH */

.search-box{
width:85%;
padding:10px;
margin:15px auto;
display:block;
border:none;
border-radius:20px;
background:rgba(255,255,255,0.1);
color:white;
}

#toggleBtn{
background:rgba(255,0,0,0.2);
border:none;
color:white;
padding:8px 20px;
border-radius:20px;
margin-top:10px;
cursor:pointer;
}

.hidden{display:none;}

.playlist{
width:90%;
margin:auto;
max-height:300px;
overflow-y:auto;
}

.song{
padding:8px;
border-bottom:1px solid #222;
cursor:pointer;
}

.song:hover{
background:#111;
}

.song.active{
color:#00ffcc;
}
</style>
</head>

<body>

<div class="topbar">üéµ BHENZFLIX MUSIC</div>

<div class="album-wrapper">

<div class="rotating-ring">
<svg viewBox="0 0 260 260">
<defs>
<path id="circlePath"
d="M130,130
m-115,0
a115,115 0 1,1 230,0
a115,115 0 1,1 -230,0"/>
</defs>
<text fill="red" font-size="15" letter-spacing="3">
<textPath href="#circlePath">
‚Ä¢ POWERED BY BHENZFLIX ‚Ä¢ POWERED BY BHENZFLIX ‚Ä¢
</textPath>
</text>
</svg>
</div>

<div class="album">
<img id="cover" src="https://picsum.photos/400/400?random=1">
</div>

</div>

<div id="title">Loading...</div>

<input type="range" id="progress" value="0">

<div class="time">
<span id="currentTime">00:00</span> /
<span id="duration">00:00</span>
</div>

<div class="controls">
<button onclick="prevSong()">‚èÆ</button>
<button id="playBtn" onclick="togglePlay()">‚ñ∂</button>
<button onclick="nextSong()">‚è≠</button>
<button onclick="toggleBass()">üîä Bass</button>
</div>

<canvas id="visualizer"></canvas>

<input type="text" id="search" class="search-box" placeholder="Search song...">

<button id="toggleBtn" onclick="togglePlaylist()">üéµ Songs</button>

<div class="playlist hidden" id="playlist"></div>

<audio id="audio" crossorigin="anonymous"></audio>

<script>

const repoBase="https://raw.githubusercontent.com/carranzabhenz35-blip/BhenzFlix/main/";

const songs=[
"04 - Avenged Sevenfold - Buried Alive.mp3",
"10 - Avenged Sevenfold - Unholy Confessions.mp3",
"13 - Avenged Sevenfold - Seize the Day.mp3",
"14 - Avenged Sevenfold - Nobody.mp3",
"18 - Avenged Sevenfold - Blinded in Chains.mp3",
"35 - Avenged Sevenfold - 4_00 AM.mp3",
"37 - Avenged Sevenfold - Crossroads.mp3",

"03 - Red Hot Chili Peppers - Californication.mp3",
"05 - Red Hot Chili Peppers - Scar Tissue.mp3",
"06 - Red Hot Chili Peppers - Snow (Hey Oh).mp3"
];

let filteredSongs=[...songs];
let current=0;
let bassOn=false;

const audio=document.getElementById("audio");
const playBtn=document.getElementById("playBtn");
const playlistDiv=document.getElementById("playlist");
const progress=document.getElementById("progress");

/* AUDIO CONTEXT */
const audioCtx=new (window.AudioContext||window.webkitAudioContext)();
const analyser=audioCtx.createAnalyser();
const source=audioCtx.createMediaElementSource(audio);
const bassFilter=audioCtx.createBiquadFilter();

bassFilter.type="lowshelf";
bassFilter.frequency.value=200;
bassFilter.gain.value=0;

source.connect(bassFilter);
bassFilter.connect(analyser);
analyser.connect(audioCtx.destination);

analyser.fftSize=256;
const bufferLength=analyser.frequencyBinCount;
const dataArray=new Uint8Array(bufferLength);

function formatTime(sec){
let m=Math.floor(sec/60)||0;
let s=Math.floor(sec%60)||0;
return (m<10?"0":"")+m+":"+(s<10?"0":"")+s;
}

function loadSong(i){
audio.src=encodeURI(repoBase+filteredSongs[i]);
document.getElementById("title").innerText=filteredSongs[i];
highlight();
}

function togglePlay(){
audioCtx.resume();
if(audio.paused){
audio.play();
playBtn.innerText="‚è∏";
}else{
audio.pause();
playBtn.innerText="‚ñ∂";
}
}

function nextSong(){
current++;
if(current>=filteredSongs.length) current=0;
loadSong(current);
audio.play();
playBtn.innerText="‚è∏";
}

function prevSong(){
current--;
if(current<0) current=filteredSongs.length-1;
loadSong(current);
audio.play();
playBtn.innerText="‚è∏";
}

function toggleBass(){
bassOn=!bassOn;
bassFilter.gain.value=bassOn?15:0;
alert("Bass Booster: "+(bassOn?"ON":"OFF"));
}

audio.addEventListener("ended",nextSong);

audio.addEventListener("timeupdate",()=>{
progress.value=(audio.currentTime/audio.duration)*100||0;
document.getElementById("currentTime").innerText=formatTime(audio.currentTime);
document.getElementById("duration").innerText=formatTime(audio.duration);
});

progress.addEventListener("input",()=>{
audio.currentTime=(progress.value/100)*audio.duration;
});

/* PLAYLIST */
function buildPlaylist(){
playlistDiv.innerHTML="";
filteredSongs.forEach((song,i)=>{
const div=document.createElement("div");
div.className="song";
div.innerText=song;
div.onclick=()=>{current=i;loadSong(i);audio.play();playBtn.innerText="‚è∏";};
playlistDiv.appendChild(div);
});
}

function highlight(){
document.querySelectorAll(".song").forEach((el,i)=>{
el.classList.toggle("active",i===current);
});
}

function togglePlaylist(){
playlistDiv.classList.toggle("hidden");
}

/* VISUALIZER */
const canvas=document.getElementById("visualizer");
const ctx=canvas.getContext("2d");
canvas.width=window.innerWidth;
canvas.height=140;

function draw(){
requestAnimationFrame(draw);
analyser.getByteFrequencyData(dataArray);
ctx.clearRect(0,0,canvas.width,canvas.height);

let barWidth=(canvas.width/bufferLength)*2.5;
let x=0;

for(let i=0;i<bufferLength;i++){
let barHeight=dataArray[i];
let r=barHeight+25;
let g=200*(i/bufferLength);
let b=150;
ctx.fillStyle="rgb("+r+","+g+","+b+")";
ctx.fillRect(x,canvas.height-barHeight/1.5,barWidth,barHeight/1.5);
x+=barWidth+1;
}
}
draw();

buildPlaylist();
loadSong(current);

</script>

</body>
</html>
